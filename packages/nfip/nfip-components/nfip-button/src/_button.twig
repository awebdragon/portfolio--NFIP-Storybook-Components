{% if button_type == 'default' %}
  {% set button_class = 'usa-button flsm-button--default' %}
{% elseif button_type == 'accentCoolLighter' %}
  {% set button_class = 'usa-button flsm-button--accent-cool-lighter' %}
{% elseif button_type == 'outline' %}
  {% set button_class = 'usa-button usa-button--outline flsm-button--outline' %}
{% elseif button_type == 'arrow' %}
  {% set button_class = 'flsm-button-arrow' %}
{% endif %}

{% if button_markup == "link" %}
  {% set tag = 'a' %}
{% elseif button_markup == "dummy" %}
  {% set tag = 'span ' %}
{% else %}
  {% set tag = 'button' %}
{% endif %}

{% set extra_attributes %}
  {% for key, value in button_attributes %}{{key|replace({'_': '-'})}}{% if value %}="{{value}}"{% endif %} {% endfor %}
{% endset %}

{% if button_width != 'full-width' and button_alignment|default('left') != 'left' %}<div class="display-flex flex-column {% if button_alignment == 'center' %}flex-align-center{% else %}flex-align-end{% endif %}">{% endif %}

  <{{ tag }} {% if button_id %}id="{{ button_id }}" {% endif %}{% if button_url %}{% if tag == 'a' %}href{% elseif tag == 'button' %}onclick{% endif %}="{{ button_url }}"{% endif %}{% if (button_target) and (button_target != '_self') %} target="{{ button_target }}"{% endif %} class="{{ button_class }}{% if button_width == 'full-width' %}-fw{% endif %}{% if button_extra_classes %} {{ button_extra_classes }}{% endif %}"{% if button_aria_label %} aria-label="{{ button_aria_label }}"{% endif %} {{extra_attributes}}>
    {% if button_type == 'arrow' %}<span>{% endif %}{{ button_text }}{% if button_type == 'arrow' %}</span>{% endif %}
    {% if button_type == 'arrow' %} <svg class="usa-icon" aria-hidden="true" focusable="false" role="img">
      <use xlink:href="./img/sprite.svg#{{ button_icon|default('arrow_forward') }}"></use>
    </svg>{% endif %}
  </{{ tag }}>